---
layout: post
title: ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ë°±ì—”ë“œ API ì„œë²„ ìš”êµ¬ì‚¬í•­ ë¶„ì„
tags:
  - Toy
  - Springboot
  - Wanted2023
categories:
  - ìŠ¤í”„ë§ë¶€íŠ¸
published: true
---
<!-- <a href="/posts/ì‹¬ì‹¬í•´ì„œ-êµ¬í˜„í•´ë³´ëŠ”-ì›í‹°ë“œ-2023-í”„ë¦¬ì˜¨ë³´ë”©-ë°±ì—”ë“œ-ì¸í„´ì‹­-ì„ ë°œê³¼ì œ-1/" target="_blank">ì´ì „í¬ìŠ¤íŠ¸</a>ì—ì„œ ê³µê³ ì— ëŒ€í•œ ì„¤ëª…ì´ ìˆì—ˆìœ¼ë‹ˆ, ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•´ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.-->
# ì£¼ì–´ì§„ ì±„ìš©ê³µê³  API ì‘ë‹µ ì˜ˆì‹œë¡œ ìš”êµ¬ì‚¬í•­ ë¶„ì„í•˜ê¸°
## ì±„ìš©ê³µê³  ìƒì„±
ì£¼ì–´ì§„ ì‘ë‹µì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```json
{  
"íšŒì‚¬_id": íšŒì‚¬_id,  
"ì±„ìš©í¬ì§€ì…˜": "ë°±ì—”ë“œ ì£¼ë‹ˆì–´ ê°œë°œì",  
"ì±„ìš©ë³´ìƒê¸ˆ": 1000000,  
"ì±„ìš©ë‚´ìš©": "ì›í‹°ë“œë©ì—ì„œ ë°±ì—”ë“œ ì£¼ë‹ˆì–´ ê°œë°œìë¥¼ ì±„ìš©í•©ë‹ˆë‹¤. ìê²©ìš”ê±´ì€..",  
"ì‚¬ìš©ê¸°ìˆ ": "Python"  
}
```

### ì˜ˆìƒ í•„ë“œê°’
ì±„ìš©ê³µê³  ìƒì„± API ì‘ë‹µì„ í†µí•´ì„œ, ì±„ìš©ê³µê³ ì˜ í•„ë“œê°’ì„ ìœ ì¶”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| í•„ë“œ         | ë°ì´í„° íƒ€ì…  | Nullable | ê³ ë ¤ ì‚¬í•­                                            |
| ------------ | ---------- |  ------- | --------------------------------------------------------- |
| ì±„ìš©í¬ì§€ì…˜   | String       | x |  
| ì±„ìš©ë³´ìƒê¸ˆ   | Number       | x | ì±„ìš©ë³´ìƒê¸ˆì€ ì ˆëŒ€ë¡œ ìŒìˆ˜ê°€ ë  ìˆ˜ ì—†ìŒ                    |
| ì±„ìš©ë‚´ìš©     | String       | x | ì±„ìš© ë‚´ìš©ì€ í° ê³µê°„ì„ í•„ìš”ë¡œ í•¨ (HTML ë“±ì´ í¬í•¨ë  ìˆ˜ ìˆìŒ) |
| ì‚¬ìš©ê¸°ìˆ      | String       | x | ì±„ìš©ê³µê³ ë‹¹ ì‚¬ìš©ê¸°ìˆ ì´ í•˜ë‚˜ë§Œ ì˜¤ì§„ ì•Šì„ ê²ƒì´ë‚˜, <br/> API ì‘ë‹µì€ `Array`ê°€ ì•„ë‹Œ `String`ì„ìœ¼ë¡œ ë¬´ì‹œí•˜ë„ë¡ í•¨ |

### ì˜ˆìƒ Endpoint
API EndpointëŠ” ë‹¤ìŒì²˜ëŸ¼ í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
```
POST /api/v1/job-posting
```
{: file='http'}
## ì±„ìš©ê³µê³  ëª©ë¡ ì¡°íšŒ
ì£¼ì–´ì§„ ì‘ë‹µì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```json
[  
{   
  "ì±„ìš©ê³µê³ _id": ì±„ìš©ê³µê³ _id,  
  "íšŒì‚¬ëª…": "ì›í‹°ë“œë©",  
  "êµ­ê°€": "í•œêµ­",  
  "ì§€ì—­": "ì„œìš¸",  
  "ì±„ìš©í¬ì§€ì…˜": "ë°±ì—”ë“œ ì£¼ë‹ˆì–´ ê°œë°œì",  
  "ì±„ìš©ë³´ìƒê¸ˆ": 1500000,  
  "ì‚¬ìš©ê¸°ìˆ ": "Python"  
},  {    "ì±„ìš©ê³µê³ _id": ì±„ìš©ê³µê³ _id,  
  "íšŒì‚¬ëª…": "ë„¤ì´ë²„",  
  "êµ­ê°€": "í•œêµ­",  
  "ì§€ì—­": "íŒêµ",  
  "ì±„ìš©í¬ì§€ì…˜": "Django ë°±ì—”ë“œ ê°œë°œì",  
  "ì±„ìš©ë³´ìƒê¸ˆ": 1000000,  
  "ì‚¬ìš©ê¸°ìˆ ": "Django"  
},  ...]
```

### ì˜ˆìƒ í•„ë“œê°’
ì±„ìš©ê³µê³  ëª©ë¡ ì¡°íšŒë¥¼ í†µí•´ì„œ ê¸°ì—…ì˜ í•„ë“œê°’ì„ ìœ ì¶”í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

| í•„ë“œ     | ë°ì´í„° íƒ€ì…  | Nullable            |
| -------- | ------------ | ----------------- |
| íšŒì‚¬ëª…   | String       | x |
| êµ­ê°€     | String       | x |
| ì§€ì—­     | String       | x |

### ì˜ˆìƒ Endpoint
API EndpointëŠ” ë‹¤ìŒì²˜ëŸ¼ í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
```
GET /api/v1/job-posting
```
{: file='http'}

## ì±„ìš©ê³µê³  ìˆ˜ì •

### ì˜ˆìƒ ì£¼ì˜ í¬ì¸íŠ¸
- ìì‹ ì´ ì˜¬ë¦° ì±„ìš©ê³µê³ ì— ëŒ€í•´ì„œë§Œ ìˆ˜ì •ì´ ê°€ëŠ¥í•´ì•¼í•©ë‹ˆë‹¤.  
- ë¶€ë¶„ ìˆ˜ì •ì´ ê°€ëŠ¥í•´ì•¼í•©ë‹ˆë‹¤.  

### ì˜ˆìƒ Endpoint
API EndpointëŠ” ë‹¤ìŒì²˜ëŸ¼ í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
```
PATCH /api/v1/job-posting/{jobPostingId}
```
{: file='http'}

## ì±„ìš©ê³µê³  ì‚­ì œ

### ì˜ˆìƒ ì£¼ì˜ í¬ì¸íŠ¸
- ìì‹ ì´ ì˜¬ë¦° ì±„ìš©ê³µê³ ì— ëŒ€í•´ì„œë§Œ ì‚­ì œê°€ ê°€ëŠ¥í•´ì•¼í•©ë‹ˆë‹¤.  

### ì˜ˆìƒ Endpoint
API EndpointëŠ” ë‹¤ìŒì²˜ëŸ¼ í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
```
DELETE /api/v1/job-posting/{jobPostingId}
```
{: file='http'}

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„
## ì±„ìš©ê³µê³ 

MySQLë¥¼ ì‚¬ìš©í• í„°ì´ë‹ˆ PK í•„ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.  

|ì¶”ê°€ë¨ | í•„ë“œ         | ë°ì´í„° íƒ€ì…  | Nullable |
| --| ------------ | ---------- |  ------- |
| (+) | PK | Number | x |
| | ì±„ìš©í¬ì§€ì…˜   | String       | x |  
| | ì±„ìš©ë³´ìƒê¸ˆ   | Number       | x |
| | ì±„ìš©ë‚´ìš©     | String       | x |
| | ì‚¬ìš©ê¸°ìˆ      | String       | x |

ê³„ì •ì˜ ìƒì„±ì¼, ìˆ˜ì •ì¼, ì‚­ì œì¼ë„ í™•ì¸ í•´ì•¼í•˜ë¯€ë¡œ `Auditing` í•„ë“œë¥¼ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.

|ì¶”ê°€ë¨ | í•„ë“œ         | ë°ì´í„° íƒ€ì…  | Nullable |
| --| ------------ | ---------- |  ------- |
| | PK | Number | x |
| | ì±„ìš©í¬ì§€ì…˜   | String       | x |  
| | ì±„ìš©ë³´ìƒê¸ˆ   | Number       | x |
| | ì±„ìš©ë‚´ìš©     | String       | x |
| | ì‚¬ìš©ê¸°ìˆ      | String       | x |
| (+) |ì±„ìš© ê³µê³  ìƒì„±ì¼     | Datetime       | x |
| (+) |ì±„ìš© ê³µê³  ìˆ˜ì •ì¼     | Datetime       | x |
| (+) |ì±„ìš© ê³µê³  ì‚­ì œì¼     | Datetime       | |


### MySQL í…Œì´ë¸” ìƒì„±

ìœ„ì—ì„œ ìƒê°í•œëŒ€ë¡œ ì‹¤ì œ í…Œì´ë¸”ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

- job_posting table

	| í•„ë“œ               | ë°ì´í„° íƒ€ì…  | ê¸°ë³¸ê°’ | ì„¤ëª…              |
	| ------------------ | ------------ | ------- | ---------------- |
	| idx               | bigint       | -       | AUTO_INCREMENT   |
	| company_id        | bigint       | -    |  ê¸°ì—… FK                |
	| recruit_reward    | int          | 0       | ì±„ìš© ë³´ìƒê¸ˆ    not null   |
	| recruit_position  | varchar(30)  | -       | ì±„ìš© í¬ì§€ì…˜    not null   |
	| description       | text         | -       | ì±„ìš© ë‚´ìš©  not null       |
	| required_skill    | varchar(20)  | -       |   ìš”êµ¬ ê¸°ìˆ    not null          |
	| created_at             | datetime     | -       | ìƒì„± ì‹œê°„ not null                                  |
	| updated_at             | datetime     | -       | ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„ not null                                  |
	| deleted_at             | datetime     | null    |  ì‚­ì œ ì‹œê°„                                         |

	| ì œì•½ ì¡°ê±´                       | ì„¤ëª…                           |
	| ----------------------------- | ----------------------------- |
	| PRIMARY KEY (`idx`)          |                             |
	| KEY `job_posting_idx_index`   |                             |
	| KEY `job_posting_user_idx_fk` |                             |
	| FOREIGN KEY (`company_id`)   | REFERENCES `user` (`idx`)     |

- DDL
```sql
CREATE TABLE `job_posting` (
  `idx` bigint NOT NULL AUTO_INCREMENT, 
  `company_id` bigint COMMENT 'ê¸°ì—… FK', 
  `recruit_reward` int NOT NULL DEFAULT '0' COMMENT 'ì±„ìš© ë³´ìƒê¸ˆ', 
  `recruit_position` varchar(30) NOT NULL COMMENT 'ì±„ìš© í¬ì§€ì…˜', 
  `description` text NOT NULL COMMENT 'ì±„ìš© ë‚´ìš©', 
  `required_skill` varchar(20) NOT NULL COMMENT 'ìš”êµ¬ ê¸°ìˆ ', 
  `created_at` datetime not null, 
  `updated_at` datetime not null, 
  `deleted_at` datetime null,
  PRIMARY KEY (`idx`), 
  KEY `job_posting_idx_index` (`idx`), 
  KEY `job_posting_user_idx_fk` (`company_id`), 
  CONSTRAINT `job_posting_user_idx_fk` FOREIGN KEY (`company_id`) REFERENCES `user` (`idx`)
) ENGINE = InnoDB AUTO_INCREMENT = 30006 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = 'ì±„ìš© ê³µê³ '
```
{: file='DDL'}

### Entity Class ìƒì„±

```java
@Getter  
@Entity  
@Table(name = "job_posting", schema = "wanted2023")  
@SQLDelete(sql = "UPDATE user SET deleted_at = NOW() WHERE idx = ?")  
@Where(clause = "deleted_at IS NULL")  
@EntityListeners(AuditingEntityListener.class)  
public class JobPosting {  
  
  @GeneratedValue(strategy = GenerationType.IDENTITY)  
  @Id  
  @Column(name = "idx")  
  private Long id;  
  
  @OneToOne  
  @JoinColumn(name = "company_id")  
  private EnterpriseUserAccount company;  
  
  @Column(name = "recruit_reward")  
  private int recruitReward;  
  
  @Column(name = "recruit_position")  
  private String recruitPosition;  
  
  @Column(name = "description")  
  private String description;  
  
  @Column(name = "required_skill")  
  private String requiredSkill;  
  
  @CreatedDate  
  @Column(name = "created_at")  
  private LocalDateTime createdAt;  
  
  @LastModifiedDate  
  @Column(name = "updated_at")  
  private LocalDateTime updatedAt;  
  
  @Column(name = "deleted_at")  
  private LocalDateTime deletedAt;  
  
  @Builder  
  public JobPosting(int recruitReward, String recruitPosition, String description,  
      String requiredSkill) {  
    this.recruitReward = recruitReward;  
    this.recruitPosition = recruitPosition;  
    this.description = description;  
    this.requiredSkill = requiredSkill;  
  }  
  
  public JobPosting() {  
  
  }  
  
  @Override  
  public boolean equals(Object o) {  
    if (this == o) {  
      return true;  
    }  
    if (o == null || getClass() != o.getClass()) {  
      return false;  
    }  
  
    JobPosting that = (JobPosting) o;  
  
    return Objects.equals(id, that.id);  
  }  
  
  @Override  
  public int hashCode() {  
    int result = (int) (id ^ (id >>> 32));  
    result = 31 * result + (company != null ? company.hashCode() : 0);  
    result = 31 * result + recruitReward;  
    result = 31 * result + (recruitPosition != null ? recruitPosition.hashCode() : 0);  
    result = 31 * result + (description != null ? description.hashCode() : 0);  
    return result;  
  }  
  
  public void setCompany(EnterpriseUserAccount company) {  
    this.company = company;  
  }
  
}
```
{: file='JobPosting.class'}

`JobPosting.class`ì—ì„œ ì§šì„ ìˆ˜ ìˆëŠ” í¬ì¸íŠ¸ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. **JPA Auditing ì ìš©**  
```java
....
@EntityListeners(AuditingEntityListener.class)  
public class JobPosting {
	....
	
	@LastModifiedDate  
	@Column(name = "updated_at")  
	private LocalDateTime updatedAt;  
	
	@Column(name = "deleted_at")  
	private LocalDateTime deletedAt;
	
	....
}
```

2. **Soft Delete ì ìš©**  
<a href="/posts/MySQL-ë¬¼ë¦¬ì‚­ì œì™€-ë…¼ë¦¬ì‚­ì œ/" target="_blank">ê´€ë ¨ í¬ìŠ¤íŠ¸ : MySQL ë¬¼ë¦¬ì‚­ì œì™€ ë…¼ë¦¬ì‚­ì œ</a>  
```java
....
@SQLDelete(sql = "UPDATE user SET deleted_at = NOW() WHERE idx = ?")  
@Where(clause = "deleted_at IS NULL")
public class JobPosting {
	....
	
	@Column(name = "deleted_at")  
	private LocalDateTime deletedAt;
	
	....
}
```
	- `@SQLDelete()` : ì‚­ì œí• ë•Œ Deleted_atì„ í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ SoftDeleteë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
	- `@Where()` : ì¡°íšŒí• ë•Œ delete_at í•„ë“œê°€ Nullì¸ Rowë§Œ ê°€ì ¸ì˜¤ë„ë¡ í•©ë‹ˆë‹¤.


3. OneToOne ì—°ê´€ê´€ê³„ ë§µí•‘  
```java
	@OneToOne  
	@JoinColumn(name = "company_id")  
	private EnterpriseUserAccount company;  

	public void setCompany(EnterpriseUserAccount company) {  
		this.company = company;  
	}
```
	- `@OneToOne`, `@JoinColumn()` : í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì°¸ì¡° ê´€ê³„ì„ì„ ëª…ì‹œí•´ì¤ë‹ˆë‹¤.
	- `setCompany()` : ì±„ìš©ê³µê³  ìƒì„±ì‹œ setCompany()ë¥¼ í†µí•´ì„œ ì°¸ì¡°í•  ê¸°ì—… ê°ì²´ë¥¼ ì§€ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## ê¸°ì—…(ì±„ìš©ê³µê³ ë¥¼ ì˜¬ë¦¬ëŠ” ì£¼ì²´)
Mysqlë¥¼ ì‚¬ìš©í• í„°ì´ë‹ˆ PK í•„ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

| ì¶”ê°€ë¨ | í•„ë“œ     | ë°ì´í„° íƒ€ì…  | Nullable            |
| -- | -------- | ------------ | ----------------- |
| (+) |PK   | Number       | x |
| |íšŒì‚¬ëª…   | String       | x |
| |êµ­ê°€     | String       | x |
| |ì§€ì—­     | String       | x |

ì—¬ê¸°ì„œ ë¡œê·¸ì¸ì„ ìœ„í•œ ID, PW í•„ë“œë„ ì¶”ê°€í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

| ì¶”ê°€ë¨ | í•„ë“œ     | ë°ì´í„° íƒ€ì…  | Nullable            |
| -- | -------- | ------------ | ----------------- |
|  |PK   | Number       | x |
| (+) |ì•„ì´ë””   | String       | x |
| (+) |ë¹„ë°€ë²ˆí˜¸   | String       | x |
| |íšŒì‚¬ëª…   | String       | x |
| |êµ­ê°€     | String       | x |
| |ì§€ì—­     | String       | x |

ê³„ì •ì˜ ìƒì„±ì¼, ìˆ˜ì •ì¼, ì‚­ì œì¼ë„ í™•ì¸ í•´ì•¼í•˜ë¯€ë¡œ `Auditing` í•„ë“œë¥¼ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.

| ì¶”ê°€ë¨ | í•„ë“œ     | ë°ì´í„° íƒ€ì…  | Nullable            |
| -- | -------- | ------------ | ----------------- |
|  |PK   | Number       | x |
| |ì•„ì´ë””   | String       | x |
| |ë¹„ë°€ë²ˆí˜¸   | String       | x |
| |íšŒì‚¬ëª…   | String       | x |
| |êµ­ê°€     | String       | x |
| |ì§€ì—­     | String       | x |
| (+) |ê³„ì • ìƒì„±ì¼     | Datetime       | x |
| (+) |ê³„ì • ìˆ˜ì •ì¼     | Datetime       | x |
| (+) |ê³„ì • ì‚­ì œì¼     | Datetime       | |

ê·¼ë°, ê¸°ì—…ë§Œ ë¡œê·¸ì¸í•˜ëŠ” ê²ƒì´ì•„ë‹Œ, ì±„ìš©ê³µê³ ì— ì§€ì›í•˜ë ¤ëŠ” ì¼ë°˜ ìœ ì €ë„ ìˆì„ê±°ê¸°ë•Œë¬¸ì—
ê·¸ì— í•´ë‹¹í•  í•„ë“œë¥¼ ì¶”ê°€í•´ì£¼ê² ìŠµë‹ˆë‹¤.
SingleTable ì „ëµì„ ì‚¬ìš©í• ê±°ê¸° ë•Œë¬¸ì— Nullable ì¹¼ëŸ¼ì€ ì§€ì›Œì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

| ì¶”ê°€ë¨ | í•„ë“œ     | ë°ì´í„° íƒ€ì…  |
| -- | -------- | ------------ |
|  |PK   | Number       |
| |ì•„ì´ë””   | String       |
| |ë¹„ë°€ë²ˆí˜¸   | String       |
| (+) | ì‚¬ìš©ì ì‹¤ëª…    |  String  |
| (+) | ì‚¬ìš©ì ìƒë…„ì›”ì¼    | Date |
| |íšŒì‚¬ëª…   | String       |
| |êµ­ê°€     | String       |
| |ì§€ì—­     | String       |
| |ê³„ì • ìƒì„±ì¼     | Datetime       |
| |ê³„ì • ìˆ˜ì •ì¼     | Datetime       |
| |ê³„ì • ì‚­ì œì¼     | Datetime       |

ì´ë ‡ê²Œ ë³´ë©´, ë‹¤ì†Œ í˜¼ë€ìŠ¤ëŸ¬ìš°ë‹ˆ SingleTableì˜ `DiscriminatorColumn`ì„ ì„¤ì •í•˜ì—¬ ì¼ë°˜ìœ ì €ì™€ ê¸°ì—…ìœ ì €ë¥¼ ë¶„ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.

|í•„ë“œ     | ë°ì´í„° íƒ€ì…  |  Discrimator  |
|-------- | ------------ | -------- |
|PK   | Number       | - |
|ì•„ì´ë””   | String       | - | 
|ë¹„ë°€ë²ˆí˜¸   | String       | - |
|ì‚¬ìš©ì ì‹¤ëª…    |  String  | ì¼ë°˜ ìœ ì € |
|ì‚¬ìš©ì ìƒë…„ì›”ì¼    | Date | ì¼ë°˜ ìœ ì € |
|íšŒì‚¬ëª…   | String       | ê¸°ì—… ìœ ì € |
|êµ­ê°€     | String       | ê¸°ì—… ìœ ì € |
|ì§€ì—­     | String       | ê¸°ì—… ìœ ì € |
|ê³„ì • ìƒì„±ì¼     | Datetime       | - |
|ê³„ì • ìˆ˜ì •ì¼     | Datetime       | - |
|ê³„ì • ì‚­ì œì¼     | Datetime       | - |

### MySQL í…Œì´ë¸” ìƒì„±

ì§€ê¸ˆê¹Œì§€ ì •ë¦¬í•´ë‘” ì •ë³´ë¡œ ì‹¤ì œ MySQLì˜ í…Œì´ë¸”ì„ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.

- user table
	
	| í•„ë“œ                    | ë°ì´í„° íƒ€ì…  | ê¸°ë³¸ê°’ | ì„¤ëª…                                       |
	| ----------------------- | ------------ | ------- | ----------------------------------------- |
	| idx                    | bigint       | -       | AUTO_INCREMENT, PRIMARY KEY                |
	| username               | varchar(50)  | -       | not null                                  |
	| password               | varchar(100) | -       | not null                                  |
	| role                   | varchar(15)  | 'personal' | not null                              |
	| is_ban                 | tinyint(1)  | 0       | not null                                  |
	| personal_name          | varchar(30)  | -       | ì‹¤ëª… (null í—ˆìš©)                           |
	| personal_brith         | date         | -       | ê°œì¸ - ìƒë…„ì›”ì¼ (null í—ˆìš©)                |
	| enterprise_name        | varchar(20)  | -       | ê¸°ì—…ëª… (null í—ˆìš©)                         |
	| enterprise_nation_code | varchar(5)   | -       | ê¸°ì—… - êµ­ê°€ ì½”ë“œ (null í—ˆìš©)              |
	| enterprise_province_code| varchar(10)  | -       | ê¸°ì—… - ì§€ì—­ ì½”ë“œ (null í—ˆìš©)              |
	| created_at             | datetime     | -       | ìƒì„± ì‹œê°„ not null                                  |
	| updated_at             | datetime     | -       | ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„ not null                                  |
	| deleted_at             | datetime     | null    |  ì‚­ì œ ì‹œê°„                                         |

	| ì¸ë±ìŠ¤                      | í•„ë“œ             |
	| -------------------------- | --------------- |
	| user_idx_index            | idx             |

- DDL
```sql
create table wanted2023.user (
  idx bigint auto_increment primary key, 
  username varchar(50) not null, 
  password varchar(100) not null, 
  role varchar(15) default 'personal' not null, 
  is_ban tinyint(1) default 0 not null, 
  personal_name varchar(30) null comment 'ì‹¤ëª…', 
  personal_brith date null comment 'ê°œì¸ - ìƒë…„ì›”ì¼', 
  enterprise_name varchar(20) null, 
  enterprise_nation_code varchar(5) null, 
  enterprise_province_code varchar(10) null, 
  created_at datetime not null, 
  updated_at datetime not null, 
  deleted_at datetime null
);
create index user_idx_index on wanted2023.user (idx);
```
{: file='DDL'}


### Entity Class ìƒì„±

DDLì„ í† ëŒ€ë¡œ Entity Classë¥¼ ë§Œë“¤ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

#### UserAccount.class
```java
@Getter  
@Entity(name = "user")  
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)  
@DiscriminatorColumn(name = "role")  
@SQLDelete(sql = "UPDATE user SET deleted_at = NOW() WHERE idx = ?")  
@Where(clause = "deleted_at IS NULL")  
@EntityListeners(AuditingEntityListener.class)  
public abstract class UserAccount {  
  
  @GeneratedValue(strategy = GenerationType.IDENTITY)  
  @Id  
  @Column(name = "idx")  
  private Long id;  
  
  @Column(name = "username")  
  private String username;  
  
  @Column(name = "password")  
  private String password;  
  
  @Builder.Default  
  @Column(name = "is_ban")  
  private boolean isBan = false;  
  
  @CreatedDate  
  @Column(name = "created_at")  
  private LocalDateTime createdAt;  
  
  @LastModifiedDate  
  @Column(name = "updated_at")  
  private LocalDateTime updatedAt;  
  
  @Column(name = "deleted_at")  
  private LocalDateTime deletedAt;  
  
  protected UserAccount(String username, String password, boolean isBan) {  
    this.username = username;  
    this.password = password;  
    this.isBan = isBan;  
  }  
  
  protected UserAccount() {  
  
  }  
  
  @Override  
  public boolean equals(Object o) {  
    if (this == o) {  
      return true;  
    }  
    if (o == null || getClass() != o.getClass()) {  
      return false;  
    }  
  
    UserAccount user = (UserAccount) o;  
  
    return Objects.equals(id, user.id);  
  }  
  
}
```
{: file='UserAccount.java'}

`UserAccount.class`ì—ì„œ ì§šì„ ìˆ˜ ìˆëŠ” í¬ì¸íŠ¸ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. **Abstract Class ì ìš©**  
ì¼ë°˜ ìœ ì € ë° ê¸°ì—… ìœ ì €ì—ì„œ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ê³µí†µ í•„ë“œë¥¼ ìƒì†ë°›ë„ë¡ í•˜ê³ ì ì´ë¥¼ ì¶”ìƒí´ë˜ìŠ¤ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.  
`UserAccount.class` ë‹¨ë… ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ë§‰ê¸° ìœ„í•¨ì´ê¸°ë„ í•©ë‹ˆë‹¤.

2. **ì‹±ê¸€í…Œì´ë¸” ì „ëµ ì ìš©**  
```java
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)  
@DiscriminatorColumn(name = "role")
```
SpringSecurityì˜ User ê°ì²´ì˜ ê¶Œí•œìœ¼ë¡œ ì‚¬ìš©ë  `role` ì¹¼ëŸ¼ê°’ìœ¼ë¡œ ì¼ë°˜, ê¸°ì—… ìœ ì €ë¥¼ ë¶„ë¥˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.~~(ê¿©ë¨¹ê³  ì•Œë¨¹ê¸°)~~

3. **JPA Auditing ì ìš©**  
	`ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„` > `ì±„ìš©ê³µê³ ` > `EntityClass ìƒì„±` í•­ëª©ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.

4. **Soft Delete ì ìš©**  
	`ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„` > `ì±„ìš©ê³µê³ ` > `EntityClass ìƒì„±` í•­ëª©ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.

#### EnterpriseUserAccount.class
```java
@Entity  
@Getter  
@NoArgsConstructor  
@DiscriminatorValue("ENTERPRISE")  
public class EnterpriseUserAccount extends UserAccount {  
  
  @Column(name = "enterprise_name")  
  private String name;  
  
  @Column(name = "enterprise_nation_code")  
  private String nationCode;  
  
  @Column(name = "enterprise_province_code")  
  private String provinceCode;  
  
  @Builder  
  public EnterpriseUserAccount(String username, String password, boolean isBan, String name,  
      String nationCode, String provinceCode) {  
    super(username, password, isBan);  
    this.name = name;  
    this.nationCode = nationCode;  
    this.provinceCode = provinceCode;  
  }  
  
}
```
{: file='EnterpriseUserAccount.class'}

#### PersonalUserAccount.class
```java
@Entity  
@NoArgsConstructor  
@DiscriminatorValue("PERSONAL")  
public class PersonalUserAccount extends UserAccount {  
  
  @Column(name = "personal_name")  
  private String name;  
  
  @Column(name = "personal_brith")  
  private LocalDate birth;  
  
  @Builder  
  public PersonalUserAccount(String username, String password, boolean isBan, String name,  
      LocalDate birth) {  
    super(username, password, isBan);  
    this.name = name;  
    this.birth = birth;  
  }  
}
```
{: file='PersonalUserAccount.class'}


ì´ì œ ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ APIë¥¼ ì§ì ‘ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ğŸ‘‹ğŸ‘‹